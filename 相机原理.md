1.1 摄像头模组的组成部分，摄像头模组CCM: CMOS camera module

	1. 镜头（Lens）
	2. 音圈马达(VCM)
	3. 红外滤光片（IR Filter）
	4. 图像传感器(Sensor)
	5. 柔性印刷电路板(FPCB)


1.2 镜头(Lens): 用于图像捕捉，小孔成像原理

一般镜头(Lens)都是有几片透镜组成，分为塑料透镜（P)和玻璃透镜(G)。
常用的镜头结构有：1P, 2P, 1G1P, 2G2P, 4G等，透镜越多，成本越高。
玻璃透镜成本高，成像好。

作用：将图像捕捉后，呈现在图像感光器上。（小孔成像）


1.3 音圈马达(VCM)：用于对焦，实现自动对焦功能

全称Voice Coil Motor，电子学里面的音圈电机，是马达的一种。因为原理和扬声器类似，所以叫音圈电机，具有高频响、高精度的特点。
其主要原理是在一个永久磁场内，通过改变马达内线圈的直流电流大小，来控制弹簧片的拉伸位置，从而带动上下运动。
手机摄像头广泛的使用VCM实现自动对焦功能，通过VCM可以调节镜头的位置，呈现清晰的图像。如下图所示：


1.4 红外滤光片(IR Filter)：滤除人眼不可见光，透过人眼可见光

IR Filter 主要作用是透过人眼可见光波段（380~700nm），滤除非可见光。防止Sensor产生偏色、波纹等，提高色彩还原度。


1.5 图像传感器(Sensor)：

Image sensor（图像传感器）是一种半导体芯片，其表面有几十万到几百万个光电二极管，光电二极管受到光照就会产生电荷，将光线转换成电信号。其功能类似于人的眼睛，因此sensor性能的好坏将直接影响到camera的性能。
这也是我们重点关注的部分。后面会详细介绍sensor的结构。


1.6 柔性印刷电路板(FPCB)

FPCB负责将摄像头的其他组件与主处理器连接起来。除了前面说到的传输信号控制镜头移动来调焦之外，还有一个主要功能就是将图像传感器的原始数据传输到主控制器。

					

2. CMOS SENSOR

2.1 sensor简介

sensor是摄像头的核心，负责将通过Lens的光信号转换为电信号，再经过内部AD转换为数字信号。

sensor是怎么把光转换成电的呢？因为用到了光电二极管。如下图所示：

				

光照到光电二极管上面，光强就转换成了二极管的电流。通过并行的电容存储起来，就转换成了对应的电压。光照越强，照射时间越久，那么电容的电压就越大。某个时候我们把电容两端的电压通过AD转换成数字信号，就可以得到一个电信号的数字化的值了。


2.2 sensor pattern

如果把上面的光电二极管排列成一个矩形，那么就可以得到一个光电二极管的矩形阵列，这样我们就可以得到一个区域的电信号数字化值了。如下图所示：




把这些数字化的值按照某种规定，比如最大255表示白色，最小0表示黑色，0~255之间的值就表示某种强度的灰色值，那么在屏幕或者纸面上显示出来，就是一副黑白图像了。这就是黑白图像的成像原理。

彩色图像生成

1、怎么表现色彩了，很简单，牛顿已经告诉我们了，用棱镜可以把白光分成多个颜色，而且光的三原色就是红绿蓝，我们只需要记录这三种颜色就可以了。那么彩色摄像机1.0的结构就出来了。

	


2、 第一: 如果三个色彩要拼成一副图像，那么棱镜分解后的光到每个感光阵列的角度和距离要是一模一样的。这个工程实现十分困难，在sensor发明的那个年代肯定是做不到的。
       
        第二：为了得到一幅彩色图像，需要三个感光阵列，成本太高。要知道，黑白相机刚出来的时候，能玩的起的都是高富帅。

        怎么办呢？有没有更好的办法呢？当然有，我们的主角Bayer出现了，提出了Bayer pattern。那就是在每个光电二极管前面加一个滤光单元，只允许红绿蓝其中一种颜色透过。如下图所示：

		



Bayer Pattern工作原理

光源经过 Bayer Filter 后，只有特定颜色的光可以穿过相应颜色的滤波器
RAW图像就是CMOS或者CCD图像感应器将捕捉到的光源信号转化为数字信号的原始数据。



Bayer pattern又叫RGGB pattern，如下所示：
对于二极管的感光阵列（又叫image array）,每4个点作为一个整体。其中一个点只能通过红色光，一个点只能通过蓝色光，两个点能通过绿色光。这就是Bayer patten。

可能有的读者很奇怪，为什么Bayer patten绿色点是俩个给，而红色蓝色点是是一个呢？那是因为人眼对绿色的敏感程度恰好是红色或者蓝色的两倍，这样把两个点分给绿色最符合人眼的习惯，也就能得到最符合人眼的视觉的图像了。



最近几年，随着手机，车载等各个方面的创新，各种其他的Pattern层出不穷，比如：RGGB/RCCB/RCCG/RGBIR Pattern


